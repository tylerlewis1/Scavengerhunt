
<!DOCTYPE html>
<html>
    <head>
        <title>2024 Scavnger Hunt</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!-- <link rel="stylesheet" href="./Css/sb.css"> -->
    </head>
    <body>
        <div class="content" style="text-align: center;">
            <label>Name</label>
            <br>
            <input id="name"></input>
            <br>
            <input type="file" id="pfp" class="imageupload">
            <br>
            <label id="status"></label>
            <br>
            <button onclick="startadd()" id="upload">Make location</button>
            
        </div>
    </body>
    <script>
       var imgerdata = "";
       pfp.addEventListener("change", ev=>{
           document.getElementById("status").innerText = "Uploading...";
           const data = new FormData();
           data.append("image", ev.target.files[0]);
           fetch("https://api.imgur.com/3/image/",{
               method: "post",
               headers:{
                   Authorization: "Client-ID ca01576e0452243"
               },
               body:data
           }
           ).then(data=>data.json()).then(data=>imgerdata = data).then(data=>document.getElementById("status").innerText = "Done!");
       });
         
            function startadd() {
                var url = ("http://192.168.5.97:25565/addlocation");
                    var oReq = new XMLHttpRequest();
                    oReq.open("POST", url);
                    oReq.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')
                    oReq.onload = function(){
                        console.log(oReq.responseText);
                        if(oReq.responseText == "Done"){
                            alert("Added");
                        }else{
                            alert("Error");
                        }
                    }
                oReq.send(JSON.stringify({
                    "name": document.getElementById("name").value,
                    "url": imgerdata.data.link
                }));
            }
       
       
       
       
       
       function make(){

       }




    </script>
</html>